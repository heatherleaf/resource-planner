<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script type="text/javascript" src="settings.js"></script>
  <script type="text/javascript" src="scheduler.js"></script>
  <link rel="stylesheet" href="scheduler.css">
  <link rel="icon" href="data:,">
  <title>Scheduler</title>
</head>
<body>

<header>
  <div>
    <h1><span id="current-period"></span></h1>
    <div id="select-period"><select name="select-period"></select></div>
    <div>
      <select class="add-role" data-type="person">
        <option selected disabled>Add person</option>
        <option value="+">Create new person</option>
        <option disabled>Add from another period:</option>
        <optgroup label="Senior" data-group="senior"></optgroup>
        <optgroup label="Junior" data-group="junior"></optgroup>
      </select>
      <select class="add-role" data-type="course">
        <option selected disabled>Add course or project</option>
        <option value="+">Create new course/project</option>
        <option disabled>Add from another period:</option>
        <optgroup label="LP3" data-group="lp3"></optgroup>
        <optgroup label="LP4" data-group="lp4"></optgroup>
        <optgroup label="LP1" data-group="lp1"></optgroup>
        <optgroup label="LP2" data-group="lp2"></optgroup>
        <optgroup label="Other tasks" data-group="other"></optgroup>
      </select>
    </div>
    <div>
      <span id="import-data"><button>Import data from JSON file</button><input type="file" accept=".json"/></span>
      <span id="export-data"><button>Export data to JSON file</button></span>
    </div>
  </div>
</header>

<main>
  <h2>People (100% ≈ 1700/1725/1750h, 20% ≈ 340/345/350h)</h2>
  <details open>
    <summary><h3>Seniors</h3></summary>
    <div class="container" data-type="person" data-group="senior"></div>
  </details>

  <details open>
    <summary><h3>Juniors</h3></summary>
    <div class="container" data-type="person" data-group="junior"></div>
  </details>

  <h2>Courses/projects (budget = 250 + 10n, where n is #students)</h2>
  <details open>
    <summary><h3>LP3, Jan-Mar</h3></summary>
    <div class="container" data-type="course" data-group="lp3"></div>
  </details>

  <details open>
    <summary><h3>LP4, Mar-May</h3></summary>
    <div class="container" data-type="course" data-group="lp4"></div>
  </details>

  <details open>
    <summary><h3>LP1, Sep-Oct</h3></summary>
    <div class="container" data-type="course" data-group="lp1"></div>
  </details>

  <details open>
    <summary><h3>LP2, Nov-Jan</h3></summary>
    <div class="container" data-type="course" data-group="lp2"></div>
  </details>

  <details open>
    <summary><h3>Other tasks</h3></summary>
    <div class="container" data-type="course" data-group="other"></div>
  </details>
</main>

<template id="person-template">
  <details class="role person" open>
    <summary>
      <span class="edit-role">&hellip;</span>
      <h4 class="role-name">Name</h4>
      <div class="role-values">
        <div>
          <div class="used-value-slider">&nbsp;</div>
        </div>
        <div>
          <input class="total-value" type="text" inputmode="numeric" pattern="\d+" size="4"/>
          <span class="used-value-text">95%</span>
        </div>
      </div>
    </summary>
    <div class="lp3"><select class="add-task" data-group="lp3"></select><div class="tasklist"></div></div>
    <div class="lp4"><select class="add-task" data-group="lp4"></select><div class="tasklist"></div></div>
    <div class="lp1"><select class="add-task" data-group="lp1"></select><div class="tasklist"></div></div>
    <div class="lp2"><select class="add-task" data-group="lp2"></select><div class="tasklist"></div></div>
    <div class="other"><select class="add-task" data-group="other"></select><div class="tasklist"></div></div>
  </details>
</template>

<template id="course-template">
  <details class="role course" open>
    <summary>
      <span class="edit-role">&hellip;</span>
      <h4 class="role-name">Name</h4>
      <div class="role-values">
        <div class="used-value-slider">&nbsp;</div>
        <div>
          <input class="total-value" type="text" inputmode="numeric" pattern="\d+" size="4"/>
          <span class="used-value-text">95%</span>
        </div>
      </div>
    </summary>
    <div class="senior"><select class="add-task" data-group="senior"></select><div class="tasklist"></div></div>
    <div class="junior"><select class="add-task" data-group="junior"></select><div class="tasklist"></div></div>
  </details>
</template>


<dialog id="edit-dialog-person" class="edit-dialog">
  <form>
    <h4>Update person "<span class="edit-role-id"></span>"</h4>
    <!-- <input required name="roleId" type="text" pattern="\w+" placeholder="Only use letters, digits or '_'"/> -->
    <table>
      <tr><td>
        <label for="name">Name</label>
      </td><td>
        <input required name="name" type="text" placeholder="Name of the person"/>
      </td></tr>
      <tr><td>
        <label for="nickname">Nickname</label>
      </td><td>
        <input name="nickname" type="text" placeholder="Nickname (optional)"/>
      </td></tr>
      <tr><td>
        <label for="target">Assigned hours</label>
      </td><td>
        <input required name="target" type="number" min="0" value="0"/>
      </td></tr>
      <tr><td>
        <label for="group">Category</label>
      </td><td>
        <select required name="group">
          <option value="senior">Senior (e.g., those who can be examiners)</option>
          <option value="junior">Junior (e.g., PhD student or postdoc)</option>
        </select>
      </td></tr>
      <tr><td>
        <label for="comments">Comments</label>
      </td><td>
        <textarea name="comments" type="number" rows="5" cols="40"></textarea>
      </td></tr>
      <tr><td></td>
        <td class="buttons">
          <button formmethod="dialog" value="ok">OK</button>
          <button formmethod="dialog" formnovalidate>Cancel</button>
          <button formmethod="dialog" value="delete" formnovalidate>Delete role</button>
      </td></tr>
    </table>
  </form>
</dialog>


<dialog id="edit-dialog-course" class="edit-dialog">
  <form>
    <h4>Update course/project "<span class="edit-role-id"></span>"</h4>
    <table>
      <tr><td>
        <label for="name">Title</label>
      </td><td>
        <input required name="name" type="text" placeholder="Title of the course"/>
      </td></tr>
      <tr><td>
        <label for="nickname">Short title</label>
      </td><td>
        <input name="nickname" type="text" placeholder="Shorter title (optional)"/>
      </td></tr>
      <tr><td>
        <label for="target">Assigned hours</label>
      </td><td>
        <input required name="target" type="number" min="0" value="0"/>
      </td></tr>
      <tr><td>
        <label for="group">Study period</label>
      </td><td>
        <select required name="group">
          <option value="lp3">LP3 (Jan-Mar)</option>
          <option value="lp4">LP4 (Mar-May)</option>
          <option value="lp1">LP1 (Sep-Oct)</option>
          <option value="lp2">LP2 (Nov-Jan)</option>
          <option value="other">Other course or project</option>
        </select>
      </td></tr>
      <tr><td>
        <label for="comments">Comments</label>
      </td><td>
        <textarea name="comments" type="number" rows="5" cols="40"></textarea>
      </td></tr>
      <tr><td></td>
        <td class="buttons">
          <button formmethod="dialog" value="ok">OK</button>
          <button formmethod="dialog" formnovalidate>Cancel</button>
          <button formmethod="dialog" value="delete" formnovalidate>Delete role</button>
      </td></tr>
    </table>
  </form>
</dialog>


<dialog id="edit-task-dialog" class="edit-dialog">
  <form>
    <h4>Update task <span class="edit-task-id"></span></h4>
    <table>
      <tr><td>
        <label for="person">Person</label>
      </td><td>
        <select required name="person"></select>
      </td></tr>
      <tr><td>
        <label for="course">Course</label>
      </td><td>
        <select required name="course"></select>
      </td></tr>
      <tr><td>
        <label for="value">Hours</label>
      </td><td>
        <input required name="value" type="number" min="10" value="0"/>
      </td></tr>
      <tr><td>
        <label for="comments">Comments</label>
      </td><td>
        <textarea name="comments" type="number" rows="5" cols="40"></textarea>
      </td></tr>
      <tr><td></td>
        <td class="buttons">
          <button formmethod="dialog" value="ok">OK</button>
          <button formmethod="dialog" formnovalidate>Cancel</button>
          <button formmethod="dialog" value="delete" formnovalidate>Delete task</button>
      </td></tr>
    </table>
  </form>
</dialog>



</body>
</html>
